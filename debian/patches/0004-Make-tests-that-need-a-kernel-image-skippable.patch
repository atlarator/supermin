From: Hilko Bengen <bengen@debian.org>
Date: Sun, 16 Feb 2025 02:54:36 +0100
Subject: Make tests that need a kernel image skippable

---
 tests/test-build-bash.sh    | 5 +++++
 tests/test-if-newer-ext2.sh | 6 ++++++
 2 files changed, 11 insertions(+)

diff --git a/tests/test-build-bash.sh b/tests/test-build-bash.sh
index 0b75d8b..8f9bc30 100755
--- a/tests/test-build-bash.sh
+++ b/tests/test-build-bash.sh
@@ -18,6 +18,11 @@
 
 set -e
 
+if [ -n "$SKIP_TEST_BUILD_BASH" ]; then
+    echo "$0: test skipped because SKIP_TEST_BUILD_BASH is set."
+    exit 77
+fi
+
 # XXX Hack for Arch.
 if [ -f /etc/arch-release ]; then
     export SUPERMIN_KERNEL=/boot/vmlinuz-linux
diff --git a/tests/test-if-newer-ext2.sh b/tests/test-if-newer-ext2.sh
index 1f12333..cfec690 100755
--- a/tests/test-if-newer-ext2.sh
+++ b/tests/test-if-newer-ext2.sh
@@ -17,6 +17,12 @@
 # Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.
 
 set -e
+
+if [ -n "$SKIP_TEST_IF_NEWER_EXT2" ]; then
+    echo "$0: test skipped because SKIP_TEST_IF_NEWER_EXT2 is set."
+    exit 77
+fi
+
 set -x
 
 # XXX Hack for Arch.
